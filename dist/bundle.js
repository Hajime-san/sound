!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const i=o(n(1));document.addEventListener("DOMContentLoaded",()=>{i.Player.init()})},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,r){function a(e){try{c(o.next(e))}catch(e){r(e)}}function u(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Player={_audioElem:new Audio,init:function(){this._audioElem.src="korobeiniki.mp3",this._audioElem.loop=!0},play:function(){this._audioElem.play()},pause:function(){this._audioElem.pause()},stop:function(){this._audioElem.pause(),this._audioElem.currentTime=0}};const i=new AudioContext,r=e=>o(void 0,void 0,void 0,(function*(){const t=yield fetch(e),n=yield t.arrayBuffer();return yield i.decodeAudioData(n)}));var a,u,c,f,l,s,d,v=!0,p=!1,y=[27.5,29.13523509488062,30.867706328507758,32.703195662574835,34.64782887210901,36.70809598967595,38.890872965260115,41.20344461410875,43.653528929125486,46.24930283895431,48.999429497718666,51.913087197493155,55,58.27047018976124,61.73541265701553,65.40639132514967,69.29565774421803,73.41619197935191,77.78174593052024,82.40688922821751,87.30705785825099,92.49860567790861,97.99885899543735,103.82617439498632,110.00000000000003,116.54094037952251,123.47082531403106,130.8127826502994,138.59131548843607,146.83238395870382,155.56349186104052,164.81377845643502,174.614115716502,184.99721135581726,195.99771799087472,207.65234878997268,220.00000000000009,233.08188075904502,246.94165062806215,261.6255653005988,277.1826309768722,293.6647679174077,311.12698372208104,329.62755691287015,349.228231433004,369.9944227116345,391.99543598174955,415.30469757994535,440.00000000000017,466.16376151809015,493.8833012561244,523.2511306011976,554.3652619537445,587.3295358348154,622.2539674441622,659.2551138257404,698.4564628660082,739.9888454232693,783.9908719634991,830.6093951598909,880.0000000000003,932.3275230361803,987.766602512249,1046.5022612023952,1108.7305239074892,1174.6590716696312,1244.5079348883246,1318.5102276514808,1396.9129257320167,1479.9776908465387,1567.9817439269984,1661.2187903197819,1760.0000000000016,1864.6550460723613,1975.533205024498,2093.0045224047913,2217.4610478149784,2349.3181433392624,2489.0158697766497,2637.0204553029616,2793.825851464034,2959.955381693078,3135.9634878539973,3322.4375806395647,3520.000000000003,3729.3100921447226,3951.066410048997,4186.0090448095825],b=["A0","A#0","B0","C1","C#1","D1","D#1","E1","F1","F#1","G1","G#1","A1","A#1","B1","C2","C#2","D2","D#2","E2","F2","F#2","G2","G#2","A2","A#2","B2","C3","C#3","D3","D#3","E3","F3","F#3","G3","G#3","A3","A#3","B3","C4","C#4","D4","D#4","E4","F4","F#4","G4","G#4","A4","A#4","B4","C5","C#5","D5","D#5","E5","F5","F#5","G5","G#5","A5","A#5","B5","C6","C#6","D6","D#6","E6","F6","F#6","G6","G#6","A6","A#6","B6","C7","C#7","D7","D#7","E7","F7","F#7","G7","G#7","A7","A#7","B7","C8"];window.onload=function(){!function(){function e(e){return o(this,void 0,void 0,(function*(){const e=i.createBufferSource();e.buffer=yield r("./korobeiniki.mp3"),v&&(u=i,v=!1),(c=u.createAnalyser()).fftSize=32768,d=u.sampleRate/c.fftSize,s=c.maxDecibels-c.minDecibels,l=new Float32Array(c.frequencyBinCount),e.connect(c),c.connect(i.destination),e.start(0);var t=function(){p||requestAnimationFrame(t),c.getFloatFrequencyData(l);for(var e,n=s,o=0,i=0;i<l.length;i++)n>(e=(l[i]-c.maxDecibels)/s*-1)&&(n=e,o=i);var r,u,f=o*d;for(i=0;i<y.length;i++){if(f<=y[0]){o=0;break}if(f>=y[87]){o=87;break}if(r=y[i],u=y[i+1],f>=r&&u>=f){o=Math.abs(f-r)>Math.abs(f-u)?i+1:i;break}}a=b[o],b[o],console.log(a)};t()}))}f||(p=!1,navigator.getUserMedia?(console.log("USE: navigator.getUserMedia()"),navigator.getUserMedia({video:!1,audio:!0},(function(t){f=t.getTracks(),e()}),(function(e){console.log(e)}))):navigator.mediaDevices.getUserMedia({video:!1,audio:!0}).then((function(t){f=t.getTracks(),e()})).catch((function(e){console.log(e)})))}()}}]);